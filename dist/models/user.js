"use strict";var _bcryptNodejs=require("bcrypt-nodejs"),_bcryptNodejs2=_interopRequireDefault(_bcryptNodejs),_mongoose=require("mongoose"),_mongoose2=_interopRequireDefault(_mongoose);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Schema=_mongoose2.default.Schema,UserSchema=new Schema({email:{type:String,lowercase:!0,unique:!0,required:!0},password:{type:String,required:!0},firstName:{type:String},lastName:{type:String},role:{type:Schema.Types.ObjectId,ref:"Role"},resetPasswordToken:{type:String},resetPasswordExpires:{type:Date}},{timestamps:!0});UserSchema.pre("save",function(e){var r=this;if(!r.isModified("password"))return e();_bcryptNodejs2.default.genSalt(5,function(t,o){if(t)return e(t);_bcryptNodejs2.default.hash(r.password,o,null,function(t,o){if(t)return e(t);r.password=o,e()})})}),UserSchema.methods.comparePassword=function(e,r){_bcryptNodejs2.default.compare(e,this.password,function(e,t){if(e)return r(e);r(null,t)})},module.exports=_mongoose2.default.model("User",UserSchema);